<div class="app-topic-panel full-height">

  <!-- VIDEO -->
  <div class="full-height" *ngIf="type === 'video'">

    <div class="full-video-author margin-left-lg" *ngIf="panel && panel.author">
      <ion-avatar [routerLink]="['/', 'grid', panel.author._id]" class="pointer">
        <img [src]="panel.author.image ? (host + panel.author.image) : '/assets/img/avatar.png'" alt=""/>
      </ion-avatar>
      <span [routerLink]="['/', 'grid', panel.author._id]" class="pointer">{{panel.author.name || panel.author.email}}</span>
      <ion-icon class="fix-pos" name="checkmark-circle-outline" *ngIf="panel.author.verified"></ion-icon>
    </div>

    <vg-player class="full-video full-height" (onPlayerReady)="onPlayerReady($event)">
      <vg-buffering></vg-buffering>
      <vg-scrub-bar>
        <vg-scrub-bar-current-time></vg-scrub-bar-current-time>
        <vg-scrub-bar-buffering-time></vg-scrub-bar-buffering-time>
      </vg-scrub-bar>

      <video [vgMedia]="media" #media preload="auto" autoplay muted>
        <source [src]="host + panel.video" type="video/mp4">
      </video>
    </vg-player>
  </div>

  <!-- TEXT + IMAGE -->
  <div class="half-text full-height" *ngIf="type === 'text'">
    <ion-img *ngIf="panel.image" [src]="host + panel.image"></ion-img>

    <p *ngIf="!tappingText || !panel.textAlt" [innerHTML]="panel.text | italic | bold | hashtag | nl2br">
    <p *ngIf="tappingText && panel.textAlt" [innerHTML]="panel.textAlt | italic | bold | hashtag | nl2br">
    </p>
  </div>

  <!-- QUIZ -->
  <div class="full-height quiz-panel" *ngIf="type === 'quiz' && !isLoading">
    <h1 *ngIf="!quiz.isPoll" i18n><span>QUIZ</span></h1>
    <h1 *ngIf="quiz.isPoll" i18n><span>POLL</span></h1>
    <h2><span class="padding-sm">{{quiz.question | italic | bold}}</span></h2>
    <h3><span>{{quiz.content | italic | bold}}</span></h3>
    <div class="quiz-buttons">
      <div *ngFor="let choice of quiz.choices">
        <ion-button class="btn-text margin-bottom" [ngClass]="quizChoice && quizChoice === choice._id ? 'btn-' + choice.color : ''" (click)="vote(choice._id)">
          {{choice.text | italic | bold}}
        </ion-button>
      </div>
    </div>
  </div>
</div>
